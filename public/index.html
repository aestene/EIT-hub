<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eit Hub</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link rel="icon" href="https://eds.equinor.com/favicon-32x32.png?v=67c14ed6e0959b2daca3798c628f02a0">
    <script type="module" src="index.js"></script>
</head>

<body>
    <img src="https://eds-static.equinor.com/logo/equinor-logo-horizontal.svg#red" alt="Equinor" id="logo-equinor"/>
    <h1 id="body-title">Subsea Shuttle Prototype</h1>
    <div id="parent1">
        <div class="left-side">
            <div id="input-view">
                <p id="input-info">Press one of the buttons below to choose <br> what to control the shuttle with.</p>
                <button class="button" id="gamepad-button">Control with gamepad</button>
                <button class="button" id="keyboard-button">Control with keyboard</button>
                
                <svg id="gamepad-info" width="256" height="170" xmlns="http://www.w3.org/2000/svg" style="display: none;  margin-left:auto; margin-right:auto; margin-top: 20px" >

                    <metadata>image/svg+xmlOpenclipart</metadata> 
                    <g>
                        <title>background</title>
                        <rect x="-1" y="-1" width="258" height="172" id="canvas_background" fill="none"/>
                    </g>
                    <g>
                        <title>Layer 1</title>
                        <g id="layer1">
                        <path id="path2996" d="m53.70254,1.28078c-0.47597,-0.007 -0.95982,0.005 -1.438,0.0167c-3.8255,0.097 -7.7038,0.77663 -11.333,1.6092c-3.3992,0.77986 -7.0506,2.0811 -9.3643,4.6907c-3.6256,4.0892 -5.5124,15.425 -5.5124,15.425s-10.619,7.0994 -14.329,12.138c-3.4896,4.7395 -5.3216,10.576 -6.8991,16.246c-1.0445,3.7543 -1.291,7.6918 -1.6435,11.573c-2.3278,25.63 -5.0152,48.958 -3.0301,77.157c0.70842,10.064 5.0934,14.999 11.025,19.567c5.4892,4.2276 13.256,6.215 20.115,5.2385c5.3841,-0.7665 10.178,-4.4895 14.004,-8.3542c7.9784,-8.0589 15.483,-28.016 17.137,-29.394c1.6533,-1.3777 3.8519,-4.6907 3.8519,-4.6907s5.2928,4.7838 8.5426,6.0603c4.5704,1.7951 9.7365,2.5903 14.603,1.9345c6.323,-0.85208 12.786,-3.2986 17.633,-7.4469c3.447,-2.95 7.173,-11.573 7.173,-11.573l26.449,0s3.726,8.6227 7.173,11.573c4.8474,4.1484 11.31,6.5948 17.633,7.4469c4.8663,0.65579 10.032,-0.13934 14.603,-1.9345c3.2498,-1.2764 8.5426,-6.0603 8.5426,-6.0603s2.1986,3.313 3.8518,4.6907c1.6533,1.3778 9.141,21.335 17.119,29.394c3.8262,3.8648 8.6367,7.5878 14.021,8.3542c6.8593,0.9765 14.626,-1.0109 20.115,-5.2385c5.9315,-4.5682 10.316,-9.5038 11.025,-19.567c1.985,-28.199 -0.70235,-51.527 -3.0301,-77.157c-0.35248,-3.8809 -0.61614,-7.8184 -1.6606,-11.573c-1.5775,-5.6702 -3.3924,-11.507 -6.882,-16.246c-3.7096,-5.0382 -14.329,-12.138 -14.329,-12.138s-1.9041,-11.335 -5.5296,-15.425c-2.3137,-2.6096 -5.9479,-3.9109 -9.3472,-4.6907c-7.2584,-1.6652 -15.525,-2.7085 -22.341,0.29103c-3.9204,1.7252 -6.595,6.0577 -8.7994,9.3643s-3.304,13.781 -3.304,13.781l-38.313,-0.15416l0,-0.11974l-13.764,0.0514l-13.781,-0.0514l0,0.11974l-38.313,0.15416s-1.0996,-10.475 -3.304,-13.781c-2.2044,-3.3066 -4.879,-7.6391 -8.7994,-9.3643c-2.9821,-1.3123 -6.2379,-1.8667 -9.5698,-1.9174l-0.0004,0.00047zm155.5,27.511c5.1807,0 9.3814,4.2008 9.3814,9.3814c0,5.1807 -4.2008,9.3814 -9.3814,9.3814c-5.1807,0 -9.3814,-4.2008 -9.3814,-9.3814c0,-5.1807 4.2007,-9.3814 9.3814,-9.3814zm-171.31,5.307l15.099,0l0,11.23s-5.4723,7.2084 -7.5496,7.1217c-2.2054,-0.092 -7.5496,-7.1217 -7.5496,-7.1217l0.0002,-11.23zm148.55,14.62c5.1807,0 9.3814,4.2008 9.3814,9.3814c0,5.1807 -4.2008,9.3814 -9.3814,9.3814c-5.1807,0 -9.3814,-4.2008 -9.3814,-9.3814c0,-5.1807 4.2008,-9.3814 9.3814,-9.3814zm45.538,0c5.1807,0 9.3814,4.2008 9.3814,9.3814c0,5.1807 -4.2007,9.3814 -9.3814,9.3814s-9.3814,-4.2008 -9.3814,-9.3814c0,-5.1807 4.2007,-9.3814 9.3814,-9.3814zm-208.86,0.68478l11.23,0s7.0296,5.3614 7.1217,7.5668c0.0868,2.0773 -7.1217,7.5496 -7.1217,7.5496l-11.23,0l0,-15.1164zm33.417,0l11.23,0l0,15.116l-11.23,0s-7.2084,-5.4723 -7.1217,-7.5496c0.092,-2.2054 7.1217,-7.5668 7.1217,-7.5668l0,0.0004zm88.705,4.023l14.687,4.8106l-14.687,4.8277l0,-9.6383zm-51.345,0.33876l14.633,0l0,8.9607l-14.633,0l0,-8.9607zm-48.453,7.7245c2.0773,-0.0868 7.5496,7.1217 7.5496,7.1217l0,11.23l-15.099,0l0,-11.23s5.3442,-7.0296 7.5496,-7.1217l-0.0002,0zm163.76,7.173c5.1807,0 9.3814,4.2008 9.3814,9.3814c0,5.1807 -4.2008,9.3814 -9.3814,9.3814c-5.1807,0 -9.3814,-4.2008 -9.3814,-9.3814c0,-5.1807 4.2007,-9.3814 9.3814,-9.3814zm-123.66,16.4c10.12,0 18.318,8.1976 18.318,18.318s-8.1976,18.335 -18.318,18.335s-18.318,-8.2148 -18.318,-18.335s8.1977,-18.318 18.318,-18.318zm82.721,0c10.12,0 18.318,8.1976 18.318,18.318s-8.1976,18.335 -18.318,18.335s-18.318,-8.2148 -18.318,-18.335s8.1976,-18.318 18.318,-18.318z" fill="#212121"/>
                        </g>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" d="m-52.30906,85.82195l0.81273,0l0.67727,0.74704l-0.67727,0.74705l-0.81273,0l0,-1.49409z" id="svg_13"/>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" fill-opacity="null" d="m-67.23405,148.58348l0.81272,0l0.67728,0.74705l-0.67728,0.74704l-0.81272,0l0,-1.49409z" id="svg_14"/>
                        <ellipse fill="#cecece" stroke-width="1.5" stroke-opacity="null" cx="187.269234" cy="58.594352" id="svg_5" rx="9.615386" ry="9.807693" stroke="#000"/>
                        <ellipse fill="#cecece" stroke-width="1.5" stroke-opacity="null" cx="209.576928" cy="78.594353" id="svg_6" rx="9.615386" ry="9.807693" stroke="#000"/>
                        <ellipse fill="#cecece" stroke-width="1.5" stroke-opacity="null" cx="232.269238" cy="58.209737" id="svg_7" rx="9.615386" ry="9.807693" stroke="#000"/>
                        <ellipse fill="#cecece" stroke-width="1.5" stroke-opacity="null" cx="209.192313" cy="38.978967" id="svg_3" rx="9.615386" ry="9.807693" stroke="#000"/>
                        <ellipse fill="#cecece" stroke-width="1.5" stroke-opacity="null" cx="168.038463" cy="103.402045" id="svg_2" rx="18" ry="18" stroke="#000"/>
                        <ellipse fill="#cecece" stroke-width="1.5" cx="85.923073" cy="103.402046" id="svg_1" rx="18.269232" ry="18.076924" stroke="#000"/>
                        <rect fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" x="94.192306" y="53.402044" width="14.615385" height="9.23077" id="svg_8"/>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" d="m46.40382,48.98077l11.53847,0l9.61538,8.26923l-9.61538,8.26923l-11.53847,0l0,-16.53846z" id="svg_10" transform="rotate(180 56.980751037597656,57.24999237060547) "/>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" d="m34.61402,36.16233l11.53847,0l9.61538,8.26923l-9.61538,8.26923l-11.53847,0l0,-16.53846z" id="svg_11" transform="rotate(90 45.190948486328125,44.43155670166016) "/>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" d="m22.69095,48.85464l11.53846,0l9.61538,8.26923l-9.61538,8.26923l-11.53846,0l0,-16.53846z" id="svg_9"/>
                        <path fill="#cecece" stroke="#000" stroke-width="1.5" stroke-opacity="null" d="m34.61402,61.16233l11.53847,0l9.61538,8.26924l-9.61538,8.26922l-11.53847,0l0,-16.53846z" id="svg_12" transform="rotate(-90 45.190948486328146,69.43157196044923) "/>
                        <path fill="#cecece" stroke-width="1.5" stroke-opacity="null" d="m147.51944,65.63815l5.38462,-15.38461l5.38461,15.38461l-10.76923,0z" id="svg_17" transform="rotate(90 152.90405273437503,57.94583892822267) " stroke="#000"/>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" x="127.866508" y="21.436921" id="svg_18" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.7928385155999097,0,0,0.6915196719963185,32.20313437653766,34.67250726896557) " stroke="#000">Arm</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="93.390124" y="-23.079015" id="svg_20" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5199100106639835,0,0,0.6229511806444576,33.1140125885386,65.50052065622238) " stroke="null">Disarm</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="66.865519" y="36.026446" id="svg_21" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4665980498380134,0,0,0.6995577865429178,36.00920638720423,60.78496234442857) " stroke="#000">Forward</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="75.490474" y="81.894614" id="svg_22" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.2766160514815052,0,0,0.4981783390681328,49.92086421114429,85.96339199762184) " stroke="#000">Backward</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="136.615682" y="-8.197918" id="svg_23" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.5287617111850277,0,0,0.5497414675876876,83.31295063588533,90.44075639026951) " stroke="#000">Up</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="146.839297" y="66.060302" id="svg_24" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4299218090396905,0,0,0.490168161627821,90.73258037182849,94.43782537292061) " stroke="#000">Down</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="83.307066" y="44.551778" id="svg_25" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.31993378494363767,0,0,0.6598275291480977,2.53112088607903,79.3662227489406) " stroke="#000">Rotate left</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="92.633242" y="-50.256729" id="svg_26" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4839890808868183,0,0,0.5282363025233678,58.295897207249055,135.10535664658036) " stroke="#000">Right</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="117.045578" y="41.88525" id="svg_27" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.4563175339897648,0,0,0.5337650599394314,79.03402194740727,78.73718192732537) " stroke="#000">Left</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="194.346156" y="148.171279" id="svg_28" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.34550394072105906,0,0,0.8593670078391208,117.59997322283328,-13.280117181679119) " stroke="#000">Translate right</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="172.345159" y="18.764076" id="svg_29" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.3893017583945617,0,0,0.40007367307174396,129.32900768513886,88.02881769326731) " stroke="#000">Manual</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="185.361166" y="16.115338" id="svg_30" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.38695002429985137,0,0,0.6657247098385008,145.11018088442364,68.2798061090734) " stroke="#000">Stabilize</text>
                        <text fill="#ffffff" stroke-width="0" stroke-opacity="null" fill-opacity="null" x="109.102299" y="7.664832" id="svg_31" font-size="24" font-family="Helvetica, Arial, sans-serif" text-anchor="start" xml:space="preserve" transform="matrix(0.37398755349440194,0,0,0.5890143753617281,121.499830942958,71.20077300231995) " stroke="#000">DepthHold</text>
                    </g>
                </svg>
                   
                <div class="control-info" id="keyboard-info" style="display: none; margin-top: 15px;">
                    <img src = "images/keyboard.svg"> 
                    <p>Arm/Disarm buttons and FlightMode selector on the right.</p>         
                </div>
                <pre id="dataText"></pre>
            </div>
            <div id="clientRequests">       
                <p id="reqButtonText">Press for control of the shuttle, <br> when you are done remember to give up control !</p>
                    <button class="button" id="requestControlButton">Request control</button>
                    <button class="button" id="cancelControlButton">Give up control</button>
                <p id="requestAnswer"></p>
                <div id="shuttle-buttons">
                    <button class="shuttle-button" id="arm-button">Arm</button>
                    <button class="shuttle-button" id="disarm-button">Disarm</button>
                    <select id="flight-modes">
                        <option value="none">--Choose Flight Mode--</option>
                        <option value="MANUAL">Manual</option>
                        <option value="STABILIZE">Stabilize</option>
                        <option value="DEPTH_HOLD">Depth Hold</option>
                    </select>
                </div>
             </div>         
        </div>
        <div id="video-view">
            <p>Video of the shuttle</p>
                <video id="video"></video>
            <button id="play-button">Watch stream</button>
                <p id="StreamStatus">The device is not streaming</p>
        </div>
        <div class = "shuttle-pictures">
            <div class = "1">
                <img src ="https://communicationtoolbox.equinor.com/fr/gallery/12366/images/lowres/e4641b051e02477ca409c2fbb49a2737.png" style="width: 350px; height: 200px;">
            </div>
            <div class = "2">
                <img src="https://communicationtoolbox.equinor.com/fr/gallery/12366/images/lowres/2e6a932674ed41df9da92759598fb625.png" style="width: 350px; height: 200px;">
            </div>
        </div>
    </div>
    <div id="telemetry">
        <p>Telemetry of the shuttle position</p>
        <pre id="telemetry-view"></pre>
    </div>
</body>
</html>